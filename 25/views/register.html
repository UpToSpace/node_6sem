<html>
<head>
  <title>Registration</title>
</head>
<body>
<div id="authorization">
  <form name="auth" action="register" method="POST">
    <label for="login">Login: </label>
    <label>
      <input id="login" type="text" name="username" placeholder="Login" required onkeyup="checkLogin(this.value)">
    </label>

    <p>
      <label for="password">Password: </label>
      <input id="password" type="password" name="password" placeholder="Password" onkeyup="checkPassword(this.value)">
    </p>

    <p>
      <label for="password">Repeat password: </label>
      <input id="repeat" type="password" name="repeat" placeholder="Password" class="showPassword" onkeyup="checkRepeat(this.value)">
    </p>

    <p>
      <label for="email">Email: </label>
      <input id="email" type="text" name="email" placeholder="Email" onkeyup="checkEmail(this.value)">
    </p>

    <div id="serving">
      <p id="errorInput"></p>
      <p id="error"></p>
    </div>

    <input type="hidden" name="inputHide" />
    <button type="button" name="sign" value="SIGN UP" onclick="{document.auth.inputHide.value=this.value;document.auth.submit();}">SIGN UP</button>

  </form>
  <a href = 'http://localhost:3000/login'>LOG IN</a>
</div>

<script>
  let login = false;
  let password = false;

  function checkLogin(str)
  {
    if(str.length < 4)
    {
      document.getElementById("errorInput").innerHTML = "Login must be more than 4 characters";
      document.getElementsByName("username")[0].style.borderColor = "red";
      login = false;
    }
    else
    {
      document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("username")[0].style.borderColor = "green";
      login = true;
    }
  }

  function checkEmail(str)
  {
    if (/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/gm.test(str))
    {   document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("email")[0].style.borderColor = "green";
      login = true;
    }
    else
    {
      document.getElementById("errorInput").innerHTML = "Mail is not corrected";
      document.getElementsByName("email")[0].style.borderColor = "red";
      login = false;
    }
  }
  function checkPassword(str) {
    if (str.length < 8) {
      document.getElementById("errorInput").innerHTML = "Password must be more than 8 characters";
      document.getElementsByName("password")[0].style.borderColor = "red";
      password = false;
      return;
    } else {
      document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("password")[0].style.borderColor = "green";
      password = true;
    }

    if (str !== document.getElementsByName("repeat")[0].value) {
      document.getElementById("errorInput").innerHTML = "Password not equals the password repeated";
      document.getElementsByName("password")[0].style.borderColor = "red";
      document.getElementsByName("repeat")[0].style.borderColor = "red";
    } else {
      document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("password")[0].style.borderColor = "green";
      document.getElementsByName("repeat")[0].style.borderColor = "green";
    }
  }
  function checkRepeat(str) {
    if (str.length < 8) {
      document.getElementById("errorInput").innerHTML = "Repeated must be more than 8 characters";
      document.getElementsByName("repeat")[0].style.borderColor = "red";
      password = false;
      return;
    } else {
      document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("repeat")[0].style.borderColor = "green";
      password = true;
    }

    if (str !== document.getElementsByName("password")[0].value) {
      document.getElementById("errorInput").innerHTML = "Repeated not equals the password repeated";
      document.getElementsByName("password")[0].style.borderColor = "red";
      document.getElementsByName("repeat")[0].style.borderColor = "red";
    } else {
      document.getElementById("errorInput").innerHTML = "";
      document.getElementsByName("password")[0].style.borderColor = "green";
      document.getElementsByName("repeat")[0].style.borderColor = "green";
    }
  }
</script>
</body>
</html>